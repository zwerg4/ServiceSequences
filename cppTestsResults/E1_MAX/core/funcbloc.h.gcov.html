<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info.cleaned - core/funcbloc.h</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="title">LCOV - code coverage report</td></tr>
            <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

            <tr>
              <td width="100%">
                <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="10%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">core</a> - funcbloc.h<span style="font-size: 80%;"> (source / <a href="funcbloc.h.func-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="5%"></td>
            <td width="5%" class="headerCovTableHead">Coverage</td>
            <td width="5%" class="headerCovTableHead" title="Covered + Uncovered code">Total</td>
            <td width="5%" class="headerCovTableHead" title="Exercised code only">Hit</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info.cleaned</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntryLo">44.6&nbsp;%</td>
            <td class="headerCovTableEntry">74</td>
            <td class="headerCovTableEntry">33</td>
          </tr>
          <tr>
            <td class="headerItem">Test Date:</td>
            <td class="headerValue">2024-02-03 20:09:13</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntryLo">41.4&nbsp;%</td>
            <td class="headerCovTableEntry">29</td>
            <td class="headerCovTableEntry">12</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="headerItem">Branches:</td>
            <td class="headerCovTableEntryLo">38.9&nbsp;%</td>
            <td class="headerCovTableEntry">18</td>
            <td class="headerCovTableEntry">7</td>
          </tr>
                  <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
                </table>
              </td>
            </tr>

            <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
          </table>

          <table cellpadding=0 cellspacing=0 border=0>
            <tr>
              <td><br></td>
            </tr>
            <tr>
              <td>
<pre class="sourceHeading">             Branch data     Line data    Source code</pre>
<pre class="source">
<span id="L1"><span class="lineNum">       1</span>                 :             : /*******************************************************************************</span>
<span id="L2"><span class="lineNum">       2</span>                 :             :  * Copyright (c) 2005, 2023 ACIN, Profactor GmbH, nxtControl GmbH, fortiss GmbH,</span>
<span id="L3"><span class="lineNum">       3</span>                 :             :  *                          Johannes Kepler University, Martin Erich Jobst,</span>
<span id="L4"><span class="lineNum">       4</span>                 :             :  *                          Primetals Technologies Austria GmbH</span>
<span id="L5"><span class="lineNum">       5</span>                 :             :  *</span>
<span id="L6"><span class="lineNum">       6</span>                 :             :  * This program and the accompanying materials are made available under the</span>
<span id="L7"><span class="lineNum">       7</span>                 :             :  * terms of the Eclipse Public License 2.0 which is available at</span>
<span id="L8"><span class="lineNum">       8</span>                 :             :  * http://www.eclipse.org/legal/epl-2.0.</span>
<span id="L9"><span class="lineNum">       9</span>                 :             :  *</span>
<span id="L10"><span class="lineNum">      10</span>                 :             :  * SPDX-License-Identifier: EPL-2.0</span>
<span id="L11"><span class="lineNum">      11</span>                 :             :  *</span>
<span id="L12"><span class="lineNum">      12</span>                 :             :  * Contributors:</span>
<span id="L13"><span class="lineNum">      13</span>                 :             :  *    Alois Zoitl, Thomas Strasser, Gunnar Grabmaier, Smodic Rene,</span>
<span id="L14"><span class="lineNum">      14</span>                 :             :  *    Gerhard Ebenhofer, Michael Hofmann, Martin Melik Merkumians, Ingo Hegny,</span>
<span id="L15"><span class="lineNum">      15</span>                 :             :  *    Stanislav Meduna, Patrick Smejkal,</span>
<span id="L16"><span class="lineNum">      16</span>                 :             :  *      - initial implementation and rework communication infrastructure</span>
<span id="L17"><span class="lineNum">      17</span>                 :             :  *    Alois Zoitl - introduced new CGenFB class for better handling generic FBs</span>
<span id="L18"><span class="lineNum">      18</span>                 :             :  *    Martin Jobst - account for data type size in FB initialization</span>
<span id="L19"><span class="lineNum">      19</span>                 :             :  *******************************************************************************/</span>
<span id="L20"><span class="lineNum">      20</span>                 :             : #ifndef _FUNCBLOC_H_</span>
<span id="L21"><span class="lineNum">      21</span>                 :             : #define _FUNCBLOC_H_</span>
<span id="L22"><span class="lineNum">      22</span>                 :             : </span>
<span id="L23"><span class="lineNum">      23</span>                 :             : #include &lt;forte_config.h&gt;</span>
<span id="L24"><span class="lineNum">      24</span>                 :             : #include &quot;mgmcmd.h&quot;</span>
<span id="L25"><span class="lineNum">      25</span>                 :             : #include &quot;event.h&quot;</span>
<span id="L26"><span class="lineNum">      26</span>                 :             : #include &quot;dataconn.h&quot;</span>
<span id="L27"><span class="lineNum">      27</span>                 :             : #include &quot;inoutdataconn.h&quot;</span>
<span id="L28"><span class="lineNum">      28</span>                 :             : #include &quot;eventconn.h&quot;</span>
<span id="L29"><span class="lineNum">      29</span>                 :             : #include &quot;stringdict.h&quot;</span>
<span id="L30"><span class="lineNum">      30</span>                 :             : #include &quot;../arch/devlog.h&quot;</span>
<span id="L31"><span class="lineNum">      31</span>                 :             : #include &quot;iec61131_functions.h&quot;</span>
<span id="L32"><span class="lineNum">      32</span>                 :             : #include &lt;stringlist.h&gt;</span>
<span id="L33"><span class="lineNum">      33</span>                 :             : #include &quot;forte_state.h&quot;</span>
<span id="L34"><span class="lineNum">      34</span>                 :             : #include &quot;forte_st_iterator.h&quot;</span>
<span id="L35"><span class="lineNum">      35</span>                 :             : #include &quot;forte_st_util.h&quot;</span>
<span id="L36"><span class="lineNum">      36</span>                 :             : </span>
<span id="L37"><span class="lineNum">      37</span>                 :             : </span>
<span id="L38"><span class="lineNum">      38</span>                 :             : class CEventChainExecutionThread;</span>
<span id="L39"><span class="lineNum">      39</span>                 :             : class CAdapter;</span>
<span id="L40"><span class="lineNum">      40</span>                 :             : class CTimerHandler;</span>
<span id="L41"><span class="lineNum">      41</span>                 :             : class CDevice;</span>
<span id="L42"><span class="lineNum">      42</span>                 :             : </span>
<span id="L43"><span class="lineNum">      43</span>                 :             : typedef CFunctionBlock *TFunctionBlockPtr;</span>
<span id="L44"><span class="lineNum">      44</span>                 :             : </span>
<span id="L45"><span class="lineNum">      45</span>                 :             : namespace forte {</span>
<span id="L46"><span class="lineNum">      46</span>                 :             :   namespace core {</span>
<span id="L47"><span class="lineNum">      47</span>                 :             :     class CFBContainer;</span>
<span id="L48"><span class="lineNum">      48</span>                 :             :   }</span>
<span id="L49"><span class="lineNum">      49</span>                 :             : }</span>
<span id="L50"><span class="lineNum">      50</span>                 :             : </span>
<span id="L51"><span class="lineNum">      51</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L52"><span class="lineNum">      52</span>                 :             : #include &quot;mgmcmdstruct.h&quot;</span>
<span id="L53"><span class="lineNum">      53</span>                 :             : namespace forte {</span>
<span id="L54"><span class="lineNum">      54</span>                 :             :   namespace core {</span>
<span id="L55"><span class="lineNum">      55</span>                 :             :     class CMonitoringHandler;</span>
<span id="L56"><span class="lineNum">      56</span>                 :             :   }</span>
<span id="L57"><span class="lineNum">      57</span>                 :             : }</span>
<span id="L58"><span class="lineNum">      58</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L59"><span class="lineNum">      59</span>                 :             : </span>
<span id="L60"><span class="lineNum">      60</span>                 :             : </span>
<span id="L61"><span class="lineNum">      61</span>                 :             : typedef CAdapter *TAdapterPtr;</span>
<span id="L62"><span class="lineNum">      62</span>                 :             : </span>
<span id="L63"><span class="lineNum">      63</span>                 :             : typedef TPortId TDataIOID; //!&lt; \ingroup CORE Type for holding an data In- or output ID</span>
<span id="L64"><span class="lineNum">      64</span>                 :             : </span>
<span id="L65"><span class="lineNum">      65</span>                 :             : /*!\ingroup CORE\brief Structure to hold all data of adapters instantiated in the function block.</span>
<span id="L66"><span class="lineNum">      66</span>                 :             :  */</span>
<span id="L67"><span class="lineNum">      67</span>                 :             : struct SAdapterInstanceDef {</span>
<span id="L68"><span class="lineNum">      68</span>                 :             :     CStringDictionary::TStringId mAdapterTypeNameID; //!&lt; Adapter type name</span>
<span id="L69"><span class="lineNum">      69</span>                 :             :     CStringDictionary::TStringId mAdapterNameID; //!&lt; Adapter instance name</span>
<span id="L70"><span class="lineNum">      70</span>                 :             :     bool mIsPlug; //!&lt; Flag for distinction of adapter nature (plug/socket)</span>
<span id="L71"><span class="lineNum">      71</span>                 :             : };</span>
<span id="L72"><span class="lineNum">      72</span>                 :             : </span>
<span id="L73"><span class="lineNum">      73</span>                 :             : /*!</span>
<span id="L74"><span class="lineNum">      74</span>                 :             :  * \brief Instance and type name of to be created FBs. Used in CFBs FBNs and BFB/SFBs internal FBs</span>
<span id="L75"><span class="lineNum">      75</span>                 :             :  */</span>
<span id="L76"><span class="lineNum">      76</span>                 :             : struct SCFB_FBInstanceData {</span>
<span id="L77"><span class="lineNum">      77</span>                 :             :     CStringDictionary::TStringId mFBInstanceNameId;</span>
<span id="L78"><span class="lineNum">      78</span>                 :             :     CStringDictionary::TStringId mFBTypeNameId;</span>
<span id="L79"><span class="lineNum">      79</span>                 :             : };</span>
<span id="L80"><span class="lineNum">      80</span>                 :             : </span>
<span id="L81"><span class="lineNum">      81</span>                 :             : /*!\ingroup CORE\brief Structure to hold all the data for specifying a function block interface.</span>
<span id="L82"><span class="lineNum">      82</span>                 :             :  */</span>
<span id="L83"><span class="lineNum">      83</span>                 :             : struct SFBInterfaceSpec {</span>
<span id="L84"><span class="lineNum">      84</span>                 :             :     TEventID mNumEIs; //!&lt; Number of event inputs</span>
<span id="L85"><span class="lineNum">      85</span>                 :             :     const CStringDictionary::TStringId *mEINames; //!&lt; List of the event input names</span>
<span id="L86"><span class="lineNum">      86</span>                 :             :     const TDataIOID *mEIWith; //!&lt; Input WITH reference list. This list contains an array of input data ids. For each input event the associated data inputs are listed. The start for each input event is specified in the mEIWithIndexes field. The end is defined by the value scmWithListDelimiter.</span>
<span id="L87"><span class="lineNum">      87</span>                 :             :     const TForteInt16 *mEIWithIndexes; //!&lt; Index list for each input event. This list gives for each input event an entry in the mEIWith. Input events are numbered starting from 0. if the input event has no assciated data inputs -1 is the entry at this event inputs postion.</span>
<span id="L88"><span class="lineNum">      88</span>                 :             :     TEventID mNumEOs; //!&lt; Number of event outputs</span>
<span id="L89"><span class="lineNum">      89</span>                 :             :     const CStringDictionary::TStringId *mEONames; //!&lt; List of the event output names</span>
<span id="L90"><span class="lineNum">      90</span>                 :             :     const TDataIOID *mEOWith; //!&lt; Output WITH reference list. This list contains an array of output data ids. For each output event the associated data outputs are listed. The start for each output event is specified in the mEOWithIndexes field. The end is defined by the value scmWithListDelimiter.</span>
<span id="L91"><span class="lineNum">      91</span>                 :             :     const TForteInt16 *mEOWithIndexes; //!&lt; Index list for each output event. This list gives for each output event an entry in the mEOWith. Output events are numbered starting from 0. If the output event has no assciated data outputs -1 is the entry at this event outputs postion. Additionally at the postion mNumEOs in this list an index to an own list in the mEOWith list is stored specifying all output data port that are not associated with any output event. That values will be updated on every FB invocation.</span>
<span id="L92"><span class="lineNum">      92</span>                 :             :     TPortId mNumDIs; //!&lt; Number of data inputs</span>
<span id="L93"><span class="lineNum">      93</span>                 :             :     const CStringDictionary::TStringId *mDINames; //!&lt; List of the data input names</span>
<span id="L94"><span class="lineNum">      94</span>                 :             :     const CStringDictionary::TStringId *mDIDataTypeNames; //!&lt; List of the data type names for the data inputs</span>
<span id="L95"><span class="lineNum">      95</span>                 :             :     TPortId mNumDOs; //!&lt; Number of data outputs</span>
<span id="L96"><span class="lineNum">      96</span>                 :             :     const CStringDictionary::TStringId *mDONames; //!&lt; List of the data output names</span>
<span id="L97"><span class="lineNum">      97</span>                 :             :     const CStringDictionary::TStringId *mDODataTypeNames; //!&lt; List of the data type names for the data outputs</span>
<span id="L98"><span class="lineNum">      98</span>                 :             :     TPortId mNumDIOs;  //!&lt; Number of data inouts</span>
<span id="L99"><span class="lineNum">      99</span>                 :             :     const CStringDictionary::TStringId *mDIONames;         //!&lt; List of the data inout names</span>
<span id="L100"><span class="lineNum">     100</span>                 :             :     TPortId mNumAdapters; //!&lt; Number of Adapters</span>
<span id="L101"><span class="lineNum">     101</span>                 :             :     const SAdapterInstanceDef *mAdapterInstanceDefinition; //!&lt; List of adapter instances</span>
<span id="L102"><span class="lineNum">     102</span>                 :             : };</span>
<span id="L103"><span class="lineNum">     103</span>                 :             : </span>
<span id="L104"><span class="lineNum">     104</span>                 :             : /*!\ingroup CORE\brief Base class for all function blocks.</span>
<span id="L105"><span class="lineNum">     105</span>                 :             :  */</span>
<span id="L106"><span class="lineNum">     106</span>                 :             : class CFunctionBlock {</span>
<span id="L107"><span class="lineNum">     107</span>                 :             :   public:</span>
<span id="L108"><span class="lineNum">     108</span>                 :             :     constexpr static TDataIOID scmWithListDelimiter = cgInvalidPortId; //!&lt; value identifying the end of a with list</span>
<span id="L109"><span class="lineNum">     109</span>                 :             :     constexpr static TForteInt16 scmNoDataAssociated = static_cast&lt;TForteInt16&gt;(cgInvalidPortId); //!&lt; value identifying the end of a with list</span>
<span id="L110"><span class="lineNum">     110</span>                 :             : </span>
<span id="L111"><span class="lineNum">     111</span>                 :             :     /*!\brief Possible states of a runable object.</span>
<span id="L112"><span class="lineNum">     112</span>                 :             :      *</span>
<span id="L113"><span class="lineNum">     113</span>                 :             :      */</span>
<span id="L114"><span class="lineNum">     114</span>                 :             :     enum class E_FBStates {</span>
<span id="L115"><span class="lineNum">     115</span>                 :             :       Running = 0, // in the most critical execution path of FORTE we are checking for this enum value it is faster if this is the zero entry</span>
<span id="L116"><span class="lineNum">     116</span>                 :             :       Idle,</span>
<span id="L117"><span class="lineNum">     117</span>                 :             :       Stopped,</span>
<span id="L118"><span class="lineNum">     118</span>                 :             :       Killed</span>
<span id="L119"><span class="lineNum">     119</span>                 :             :     };</span>
<span id="L120"><span class="lineNum">     120</span>                 :             : </span>
<span id="L121"><span class="lineNum">     121</span>                 :             :     /*! \brief Indicator that the given EventID is an included adapter's eventID.</span>
<span id="L122"><span class="lineNum">     122</span>                 :             :      *</span>
<span id="L123"><span class="lineNum">     123</span>                 :             :      * EventIDs &gt; scmMaxInterfaceEvents: highByte indicates (AdapterID+1)</span>
<span id="L124"><span class="lineNum">     124</span>                 :             :      */</span>
<span id="L125"><span class="lineNum">     125</span>                 :             :     static const TEventID scmMaxInterfaceEvents = cgInvalidPortId;</span>
<span id="L126"><span class="lineNum">     126</span>                 :             :     static_assert((scmMaxInterfaceEvents &amp; (scmMaxInterfaceEvents + 1)) == 0,</span>
<span id="L127"><span class="lineNum">     127</span>                 :             :                   &quot;scmMaxInterfaceEvents must be a valid bitmask&quot;);</span>
<span id="L128"><span class="lineNum">     128</span>                 :             : </span>
<span id="L129"><span class="lineNum">     129</span>                 :             :     virtual bool initialize();</span>
<span id="L130"><span class="lineNum">     130</span>                 :             : </span>
<span id="L131"><span class="lineNum">     131</span>                 :             :     virtual ~CFunctionBlock();</span>
<span id="L132"><span class="lineNum">     132</span>                 :             : </span>
<span id="L133"><span class="lineNum">     133</span>                 :             :     /*!\brief Get the resource the function block is contained in.</span>
<span id="L134"><span class="lineNum">     134</span>                 :             :      */</span>
<span id="L135"><span class="lineNum">     135</span>                 :             :     virtual CResource* getResource();</span>
<span id="L136"><span class="lineNum">     136</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     virtual const CResource* getResource() const {</span></span>
<span id="L137"><span class="lineNum">     137</span>                 :<span class="tlaUNC">           0 :       return const_cast&lt;CFunctionBlock *&gt;(this)-&gt;getResource();</span></span>
<span id="L138"><span class="lineNum">     138</span>                 :             :     }</span>
<span id="L139"><span class="lineNum">     139</span>                 :             : </span>
<span id="L140"><span class="lineNum">     140</span>                 :             :     virtual CDevice* getDevice();</span>
<span id="L141"><span class="lineNum">     141</span>                 :<span class="tlaUNC">           0 :     virtual const CDevice* getDevice() const {</span></span>
<span id="L142"><span class="lineNum">     142</span>                 :<span class="tlaUNC">           0 :       return const_cast&lt;CFunctionBlock *&gt;(this)-&gt;getDevice();</span></span>
<span id="L143"><span class="lineNum">     143</span>                 :             :     }</span>
<span id="L144"><span class="lineNum">     144</span>                 :             : </span>
<span id="L145"><span class="lineNum">     145</span>                 :<span class="tlaUNC">           0 :     forte::core::CFBContainer&amp; getContainer() const {</span></span>
<span id="L146"><span class="lineNum">     146</span>                 :<span class="tlaUNC">           0 :       return mContainer;</span></span>
<span id="L147"><span class="lineNum">     147</span>                 :             :     }</span>
<span id="L148"><span class="lineNum">     148</span>                 :             : </span>
<span id="L149"><span class="lineNum">     149</span>                 :             :     /*!\brief Get the timer of the device where the FB is contained.</span>
<span id="L150"><span class="lineNum">     150</span>                 :             :      */</span>
<span id="L151"><span class="lineNum">     151</span>                 :             :     CTimerHandler&amp; getTimer();</span>
<span id="L152"><span class="lineNum">     152</span>                 :             : </span>
<span id="L153"><span class="lineNum">     153</span>                 :             :     /*!\brief Returns the stringId for type name of this FB instance</span>
<span id="L154"><span class="lineNum">     154</span>                 :             :      */</span>
<span id="L155"><span class="lineNum">     155</span>                 :             :     virtual CStringDictionary::TStringId getFBTypeId() const = 0;</span>
<span id="L156"><span class="lineNum">     156</span>                 :             : </span>
<span id="L157"><span class="lineNum">     157</span>                 :             : </span>
<span id="L158"><span class="lineNum">     158</span>                 :             :     /*!\brief Returns the type name of this FB instance</span>
<span id="L159"><span class="lineNum">     159</span>                 :             :      */</span>
<span id="L160"><span class="lineNum">     160</span>                 :<span class="tlaUNC">           0 :     const char * getFBTypeName(){</span></span>
<span id="L161"><span class="lineNum">     161</span>                 :<span class="tlaUNC">           0 :       return CStringDictionary::getInstance().get(getFBTypeId());</span></span>
<span id="L162"><span class="lineNum">     162</span>                 :             :     }</span>
<span id="L163"><span class="lineNum">     163</span>                 :             : </span>
<span id="L164"><span class="lineNum">     164</span>                 :             :     /*!\brief Get the ID of a specific event input of the FB.</span>
<span id="L165"><span class="lineNum">     165</span>                 :             :      *</span>
<span id="L166"><span class="lineNum">     166</span>                 :             :      * \param paEINameId   StringId to the event input name.</span>
<span id="L167"><span class="lineNum">     167</span>                 :             :      * \return The ID of the event input or cgInvalidEventID.</span>
<span id="L168"><span class="lineNum">     168</span>                 :             :      */</span>
<span id="L169"><span class="lineNum">     169</span>                 :<span class="tlaGNC tlaBgGNC">           8 :     TEventID getEIID(CStringDictionary::TStringId paEINameId) const {</span></span>
<span id="L170"><span class="lineNum">     170</span>                 :<span class="tlaGNC">           8 :       return static_cast&lt;TEventID&gt;(getPortId(paEINameId, mInterfaceSpec-&gt;mNumEIs, mInterfaceSpec-&gt;mEINames));</span></span>
<span id="L171"><span class="lineNum">     171</span>                 :             :     }</span>
<span id="L172"><span class="lineNum">     172</span>                 :             : </span>
<span id="L173"><span class="lineNum">     173</span>                 :             :     /*!\brief Get the ID of a specific event output of the FB.</span>
<span id="L174"><span class="lineNum">     174</span>                 :             :      *</span>
<span id="L175"><span class="lineNum">     175</span>                 :             :      * \param paEONameId string id to the event output name.</span>
<span id="L176"><span class="lineNum">     176</span>                 :             :      * \return The ID of the event output or cgInvalidEventID.</span>
<span id="L177"><span class="lineNum">     177</span>                 :             :      */</span>
<span id="L178"><span class="lineNum">     178</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     TEventID getEOID(CStringDictionary::TStringId paEONameId) const {</span></span>
<span id="L179"><span class="lineNum">     179</span>                 :<span class="tlaUNC">           0 :       return static_cast&lt;TEventID&gt;(getPortId(paEONameId, mInterfaceSpec-&gt;mNumEOs, mInterfaceSpec-&gt;mEONames));</span></span>
<span id="L180"><span class="lineNum">     180</span>                 :             :     }</span>
<span id="L181"><span class="lineNum">     181</span>                 :             : </span>
<span id="L182"><span class="lineNum">     182</span>                 :             :     CEventConnection* getEOConnection(CStringDictionary::TStringId paEONameId);</span>
<span id="L183"><span class="lineNum">     183</span>                 :             : </span>
<span id="L184"><span class="lineNum">     184</span>                 :             :     const CEventConnection* getEOConnection(CStringDictionary::TStringId paEONameId) const;</span>
<span id="L185"><span class="lineNum">     185</span>                 :             : </span>
<span id="L186"><span class="lineNum">     186</span>                 :             :     /*!\brief Connects specific data input of a FB with a specific data connection.</span>
<span id="L187"><span class="lineNum">     187</span>                 :             :      *</span>
<span id="L188"><span class="lineNum">     188</span>                 :             :      * If the connection pointer is 0 then it is equal to a disconnect. Furthermore, if their is already a connection</span>
<span id="L189"><span class="lineNum">     189</span>                 :             :      * to the given data port the connection attempt will be rejected. However if the further connection attempt</span>
<span id="L190"><span class="lineNum">     190</span>                 :             :      * is done with the same connection object then it is a reconfiguration attempt for any data inputs. This is necessary</span>
<span id="L191"><span class="lineNum">     191</span>                 :             :      * when during the first connection the data type of the connection was not clear.</span>
<span id="L192"><span class="lineNum">     192</span>                 :             :      *</span>
<span id="L193"><span class="lineNum">     193</span>                 :             :      * \param paDINameId StringID of the data input name.</span>
<span id="L194"><span class="lineNum">     194</span>                 :             :      * \param paDataCon Pointer to the data connection the FB should be connected to.</span>
<span id="L195"><span class="lineNum">     195</span>                 :             :      * \return TRUE on success, FALSE if data output not exists or output is already connected.</span>
<span id="L196"><span class="lineNum">     196</span>                 :             :      */</span>
<span id="L197"><span class="lineNum">     197</span>                 :             :     virtual bool connectDI(TPortId paDIPortId, CDataConnection *paDataCon);</span>
<span id="L198"><span class="lineNum">     198</span>                 :             : </span>
<span id="L199"><span class="lineNum">     199</span>                 :             :     virtual bool connectDIO(TPortId paDIPortId, CInOutDataConnection *paDataCon);</span>
<span id="L200"><span class="lineNum">     200</span>                 :             : </span>
<span id="L201"><span class="lineNum">     201</span>                 :             :     /*! \brief Gets the index of the mDINames array of a specific data output of a FB</span>
<span id="L202"><span class="lineNum">     202</span>                 :             :      *</span>
<span id="L203"><span class="lineNum">     203</span>                 :             :      * \param paDINameId  StringId of the data input name.</span>
<span id="L204"><span class="lineNum">     204</span>                 :             :      * \return Returns index of the Data Input Array of a FB</span>
<span id="L205"><span class="lineNum">     205</span>                 :             :      */</span>
<span id="L206"><span class="lineNum">     206</span>                 :<span class="tlaGNC tlaBgGNC">          28 :     TPortId getDIID(CStringDictionary::TStringId paDINameId) const {</span></span>
<span id="L207"><span class="lineNum">     207</span>                 :<span class="tlaGNC">          28 :       return getPortId(paDINameId, mInterfaceSpec-&gt;mNumDIs, mInterfaceSpec-&gt;mDINames);</span></span>
<span id="L208"><span class="lineNum">     208</span>                 :             :     }</span>
<span id="L209"><span class="lineNum">     209</span>                 :             : </span>
<span id="L210"><span class="lineNum">     210</span>                 :             :     /*!\brief Get the pointer to a data input of the FB.</span>
<span id="L211"><span class="lineNum">     211</span>                 :             :      *</span>
<span id="L212"><span class="lineNum">     212</span>                 :             :      * \param paDINameId ID of the data input name.</span>
<span id="L213"><span class="lineNum">     213</span>                 :             :      * \return Pointer to the data input or 0. If 0 is returned DataInput is ANY</span>
<span id="L214"><span class="lineNum">     214</span>                 :             :      */</span>
<span id="L215"><span class="lineNum">     215</span>                 :             :     CIEC_ANY* getDataInput(CStringDictionary::TStringId paDINameId);</span>
<span id="L216"><span class="lineNum">     216</span>                 :             : </span>
<span id="L217"><span class="lineNum">     217</span>                 :             :     /*!\brief get the pointer to a data input using the portId as identifier</span>
<span id="L218"><span class="lineNum">     218</span>                 :             :      */</span>
<span id="L219"><span class="lineNum">     219</span>                 :             :     CIEC_ANY* getDIFromPortId(TPortId paDIPortId);</span>
<span id="L220"><span class="lineNum">     220</span>                 :             : </span>
<span id="L221"><span class="lineNum">     221</span>                 :             :     /*! \brief Gets the index of the mDONames array of a specific data output of a FB</span>
<span id="L222"><span class="lineNum">     222</span>                 :             :      * \param paDONameId  StringId of the data input name.</span>
<span id="L223"><span class="lineNum">     223</span>                 :             :      * \return Returns index of the Data Output Array of a FB</span>
<span id="L224"><span class="lineNum">     224</span>                 :             :      */</span>
<span id="L225"><span class="lineNum">     225</span>                 :<span class="tlaGNC">          32 :     TPortId getDOID(CStringDictionary::TStringId paDONameId) const {</span></span>
<span id="L226"><span class="lineNum">     226</span>                 :<span class="tlaGNC">          32 :       return getPortId(paDONameId, mInterfaceSpec-&gt;mNumDOs, mInterfaceSpec-&gt;mDONames);</span></span>
<span id="L227"><span class="lineNum">     227</span>                 :             :     }</span>
<span id="L228"><span class="lineNum">     228</span>                 :             : </span>
<span id="L229"><span class="lineNum">     229</span>                 :             :     /*! \brief Gets the index of the mDONames array of a specific data output of a FB</span>
<span id="L230"><span class="lineNum">     230</span>                 :             :      * \param paDONameId  StringId of the data input name.</span>
<span id="L231"><span class="lineNum">     231</span>                 :             :      * \return Returns index of the Data Output Array of a FB</span>
<span id="L232"><span class="lineNum">     232</span>                 :             :      */</span>
<span id="L233"><span class="lineNum">     233</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     TPortId getDIOID(CStringDictionary::TStringId paDIONameId) const {</span></span>
<span id="L234"><span class="lineNum">     234</span>                 :<span class="tlaUNC">           0 :       return getPortId(paDIONameId, mInterfaceSpec-&gt;mNumDIOs, mInterfaceSpec-&gt;mDIONames);</span></span>
<span id="L235"><span class="lineNum">     235</span>                 :             :     }</span>
<span id="L236"><span class="lineNum">     236</span>                 :             : </span>
<span id="L237"><span class="lineNum">     237</span>                 :             :     /*!\brief get the pointer to a data output using the portId as identifier</span>
<span id="L238"><span class="lineNum">     238</span>                 :             :      */</span>
<span id="L239"><span class="lineNum">     239</span>                 :             :     CIEC_ANY* getDOFromPortId(TPortId paDOPortId);</span>
<span id="L240"><span class="lineNum">     240</span>                 :             : </span>
<span id="L241"><span class="lineNum">     241</span>                 :             :     CIEC_ANY* getDIOFromPortId(TPortId paDIPortId);</span>
<span id="L242"><span class="lineNum">     242</span>                 :             : </span>
<span id="L243"><span class="lineNum">     243</span>                 :             :     CDataConnection* getDIConnection(CStringDictionary::TStringId paDINameId);</span>
<span id="L244"><span class="lineNum">     244</span>                 :             : </span>
<span id="L245"><span class="lineNum">     245</span>                 :             :     const CDataConnection* getDIConnection(CStringDictionary::TStringId paDINameId) const;</span>
<span id="L246"><span class="lineNum">     246</span>                 :             : </span>
<span id="L247"><span class="lineNum">     247</span>                 :             :     CDataConnection* getDOConnection(CStringDictionary::TStringId paDONameId);</span>
<span id="L248"><span class="lineNum">     248</span>                 :             : </span>
<span id="L249"><span class="lineNum">     249</span>                 :             :     const CDataConnection* getDOConnection(CStringDictionary::TStringId paDONameId) const;</span>
<span id="L250"><span class="lineNum">     250</span>                 :             : </span>
<span id="L251"><span class="lineNum">     251</span>                 :             :     CInOutDataConnection *getDIOInConnection(CStringDictionary::TStringId paDIONameId);</span>
<span id="L252"><span class="lineNum">     252</span>                 :             : </span>
<span id="L253"><span class="lineNum">     253</span>                 :             :     const CInOutDataConnection *getDIOInConnection(CStringDictionary::TStringId paDIONameId) const;</span>
<span id="L254"><span class="lineNum">     254</span>                 :             : </span>
<span id="L255"><span class="lineNum">     255</span>                 :             :     CInOutDataConnection *getDIOOutConnection(CStringDictionary::TStringId paDIONameId);</span>
<span id="L256"><span class="lineNum">     256</span>                 :             : </span>
<span id="L257"><span class="lineNum">     257</span>                 :             :     const CInOutDataConnection *getDIOOutConnection(CStringDictionary::TStringId paDIONameId) const;</span>
<span id="L258"><span class="lineNum">     258</span>                 :             : </span>
<span id="L259"><span class="lineNum">     259</span>                 :             :     /*!\brief if the data output is of generic type (i.e, ANY) this function allows an data connection to configure</span>
<span id="L260"><span class="lineNum">     260</span>                 :             :      * the DO with the specific type coming from the other end of the connection</span>
<span id="L261"><span class="lineNum">     261</span>                 :             :      */</span>
<span id="L262"><span class="lineNum">     262</span>                 :             :     virtual bool configureGenericDO(TPortId paDOPortId, const CIEC_ANY &amp;paRefValue);</span>
<span id="L263"><span class="lineNum">     263</span>                 :             : </span>
<span id="L264"><span class="lineNum">     264</span>                 :             :     /*!\brief Get the pointer to a data output of the FB.</span>
<span id="L265"><span class="lineNum">     265</span>                 :             :      *</span>
<span id="L266"><span class="lineNum">     266</span>                 :             :      * \param paDONameId StringID of the data output name.</span>
<span id="L267"><span class="lineNum">     267</span>                 :             :      * \return Pointer to the data output or 0. If 0 is returned DataOutput is ANY</span>
<span id="L268"><span class="lineNum">     268</span>                 :             :      */</span>
<span id="L269"><span class="lineNum">     269</span>                 :             :     CIEC_ANY* getDataOutput(CStringDictionary::TStringId paDONameId);</span>
<span id="L270"><span class="lineNum">     270</span>                 :             : </span>
<span id="L271"><span class="lineNum">     271</span>                 :             :     /*!\brief Get the pointer to a variable of the FB.</span>
<span id="L272"><span class="lineNum">     272</span>                 :             :      *</span>
<span id="L273"><span class="lineNum">     273</span>                 :             :      * @param paNameList array of the name hierarchy the requested variable</span>
<span id="L274"><span class="lineNum">     274</span>                 :             :      * @param paNameListSize length of the array</span>
<span id="L275"><span class="lineNum">     275</span>                 :             :      * \return Pointer to the variable or 0.</span>
<span id="L276"><span class="lineNum">     276</span>                 :             :      *  The variable may be input, output or in the case of a BFB an internal var.</span>
<span id="L277"><span class="lineNum">     277</span>                 :             :      */</span>
<span id="L278"><span class="lineNum">     278</span>                 :             :     virtual CIEC_ANY* getVar(CStringDictionary::TStringId *paNameList, unsigned int paNameListSize);</span>
<span id="L279"><span class="lineNum">     279</span>                 :             : </span>
<span id="L280"><span class="lineNum">     280</span>                 :             :     /*!\brief Get the pointer to the adapter instance of the FB.</span>
<span id="L281"><span class="lineNum">     281</span>                 :             :      *</span>
<span id="L282"><span class="lineNum">     282</span>                 :             :      * \param paAdapterNameId  StringId of the adapter name.</span>
<span id="L283"><span class="lineNum">     283</span>                 :             :      * \return Pointer to the adapter or nullptr.</span>
<span id="L284"><span class="lineNum">     284</span>                 :             :      */</span>
<span id="L285"><span class="lineNum">     285</span>                 :             :     CAdapter* getAdapter(CStringDictionary::TStringId paAdapterNameId) const;</span>
<span id="L286"><span class="lineNum">     286</span>                 :             : </span>
<span id="L287"><span class="lineNum">     287</span>                 :             :     TPortId getAdapterPortId(CStringDictionary::TStringId paAdapterNameId) const;</span>
<span id="L288"><span class="lineNum">     288</span>                 :             : </span>
<span id="L289"><span class="lineNum">     289</span>                 :             :     /*!\brief Function that handles incoming events.</span>
<span id="L290"><span class="lineNum">     290</span>                 :             :      *</span>
<span id="L291"><span class="lineNum">     291</span>                 :             :      * \param paEIID ID of the input event that has occurred.</span>
<span id="L292"><span class="lineNum">     292</span>                 :             :      * \param paExecEnv Event chain execution environment the FB will be executed in (used for adding output events).</span>
<span id="L293"><span class="lineNum">     293</span>                 :             :      */</span>
<span id="L294"><span class="lineNum">     294</span>                 :<span class="tlaGNC tlaBgGNC">          22 :     void receiveInputEvent(TEventID paEIID, CEventChainExecutionThread *paExecEnv) {</span></span>
<span id="L295"><span class="lineNum">     295</span>                 :             :       FORTE_TRACE(&quot;InputEvent: Function Block (%s) got event: %d (maxid: %d)\n&quot;, CStringDictionary::getInstance().get(getInstanceNameId()), paEIID, mInterfaceSpec-&gt;mNumEIs - 1);</span>
<span id="L296"><span class="lineNum">     296</span>                 :             : </span>
<span id="L297"><span class="lineNum">     297</span>                 :             :       #ifdef FORTE_TRACE_CTF</span>
<span id="L298"><span class="lineNum">     298</span>                 :             :         traceInputEvent(paEIID);</span>
<span id="L299"><span class="lineNum">     299</span>                 :             :       #endif</span>
<span id="L300"><span class="lineNum">     300</span>                 :             : </span>
<span id="L301"><span class="lineNum">     301</span>         [<span class="tlaGBC" title="Branch 0 was taken 22 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">          22 :       if(E_FBStates::Running == getState()){</span></span>
<span id="L302"><span class="lineNum">     302</span>         [<span class="tlaGBC" title="Branch 0 was taken 20 times"> + </span><span class="tlaGBC" title="Branch 1 was taken 2 times"> + </span>]:<span class="tlaGNC">          22 :         if(paEIID &lt; mInterfaceSpec-&gt;mNumEIs) {</span></span>
<span id="L303"><span class="lineNum">     303</span>                 :<span class="tlaGNC">          20 :           readInputData(paEIID);</span></span>
<span id="L304"><span class="lineNum">     304</span>                 :             :           #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L305"><span class="lineNum">     305</span>                 :             :                 // Count Event for monitoring</span>
<span id="L306"><span class="lineNum">     306</span>                 :<span class="tlaGNC">          20 :                 mEIMonitorCount[paEIID]++;</span></span>
<span id="L307"><span class="lineNum">     307</span>                 :             :           #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L308"><span class="lineNum">     308</span>                 :             :         }</span>
<span id="L309"><span class="lineNum">     309</span>                 :<span class="tlaGNC">          22 :         executeEvent(paEIID, paExecEnv);</span></span>
<span id="L310"><span class="lineNum">     310</span>                 :             :       }</span>
<span id="L311"><span class="lineNum">     311</span>                 :<span class="tlaGNC">          22 :     }</span></span>
<span id="L312"><span class="lineNum">     312</span>                 :             : </span>
<span id="L313"><span class="lineNum">     313</span>                 :             :     /*!\brief Configuration interface used by the typelib to parameterize generic function blocks.</span>
<span id="L314"><span class="lineNum">     314</span>                 :             :      *</span>
<span id="L315"><span class="lineNum">     315</span>                 :             :      * \param paConfigString  A string containing the needed configuration data.</span>
<span id="L316"><span class="lineNum">     316</span>                 :             :      * \return TRUE if configuration went ok, else FALSE.</span>
<span id="L317"><span class="lineNum">     317</span>                 :             :      *</span>
<span id="L318"><span class="lineNum">     318</span>                 :             :      */</span>
<span id="L319"><span class="lineNum">     319</span>                 :             :     virtual bool configureFB(const char *paConfigString);</span>
<span id="L320"><span class="lineNum">     320</span>                 :             : </span>
<span id="L321"><span class="lineNum">     321</span>                 :             :     static size_t calculateFBConnDataSize(const SFBInterfaceSpec &amp;paInterfaceSpec);</span>
<span id="L322"><span class="lineNum">     322</span>                 :             : </span>
<span id="L323"><span class="lineNum">     323</span>                 :             :     static size_t calculateFBVarsDataSize(const SFBInterfaceSpec &amp;paInterfaceSpec);</span>
<span id="L324"><span class="lineNum">     324</span>                 :             : </span>
<span id="L325"><span class="lineNum">     325</span>                 :             :     void setupFBInterface(const SFBInterfaceSpec *paInterfaceSpec);</span>
<span id="L326"><span class="lineNum">     326</span>                 :             : </span>
<span id="L327"><span class="lineNum">     327</span>                 :<span class="tlaGNC">          28 :     const SFBInterfaceSpec* getFBInterfaceSpec() const {</span></span>
<span id="L328"><span class="lineNum">     328</span>                 :<span class="tlaGNC">          28 :       return mInterfaceSpec;</span></span>
<span id="L329"><span class="lineNum">     329</span>                 :             :     }</span>
<span id="L330"><span class="lineNum">     330</span>                 :             : </span>
<span id="L331"><span class="lineNum">     331</span>                 :             :     virtual EMGMResponse changeFBExecutionState(EMGMCommandType paCommand);</span>
<span id="L332"><span class="lineNum">     332</span>                 :             : </span>
<span id="L333"><span class="lineNum">     333</span>                 :             :     /*!\brief Get/set the instance name</span>
<span id="L334"><span class="lineNum">     334</span>                 :             :      */</span>
<span id="L335"><span class="lineNum">     335</span>                 :<span class="tlaGNC">           6 :     CStringDictionary::TStringId getInstanceNameId() const {</span></span>
<span id="L336"><span class="lineNum">     336</span>                 :<span class="tlaGNC">           6 :       return mFBInstanceName;</span></span>
<span id="L337"><span class="lineNum">     337</span>                 :             :     }</span>
<span id="L338"><span class="lineNum">     338</span>                 :             :     ;</span>
<span id="L339"><span class="lineNum">     339</span>                 :             : </span>
<span id="L340"><span class="lineNum">     340</span>                 :             :     /*! \brief Get the full hierarchical name of this FB in its application</span>
<span id="L341"><span class="lineNum">     341</span>                 :             :      *</span>
<span id="L342"><span class="lineNum">     342</span>                 :             :      * Generates a dot separated name list of this FB excluding device and resource</span>
<span id="L343"><span class="lineNum">     343</span>                 :             :      *</span>
<span id="L344"><span class="lineNum">     344</span>                 :             :      * \return full hierarchical name</span>
<span id="L345"><span class="lineNum">     345</span>                 :             :      */</span>
<span id="L346"><span class="lineNum">     346</span>                 :             :     std::string getFullQualifiedApplicationInstanceName(const char sepChar) const;</span>
<span id="L347"><span class="lineNum">     347</span>                 :             : </span>
<span id="L348"><span class="lineNum">     348</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     const char* getInstanceName() const {</span></span>
<span id="L349"><span class="lineNum">     349</span>                 :<span class="tlaUNC">           0 :       return CStringDictionary::getInstance().get(mFBInstanceName);</span></span>
<span id="L350"><span class="lineNum">     350</span>                 :             :     }</span>
<span id="L351"><span class="lineNum">     351</span>                 :             : </span>
<span id="L352"><span class="lineNum">     352</span>                 :             :     void setInstanceNameId(const CStringDictionary::TStringId paInstanceNameId) {</span>
<span id="L353"><span class="lineNum">     353</span>                 :             :       mFBInstanceName = paInstanceNameId;</span>
<span id="L354"><span class="lineNum">     354</span>                 :             :     }</span>
<span id="L355"><span class="lineNum">     355</span>                 :             : </span>
<span id="L356"><span class="lineNum">     356</span>                 :             :     /*!\brief Get information if the runable object is deletable by a management command.</span>
<span id="L357"><span class="lineNum">     357</span>                 :             :      *</span>
<span id="L358"><span class="lineNum">     358</span>                 :             :      */</span>
<span id="L359"><span class="lineNum">     359</span>                 :             :     bool getDeletable() const {</span>
<span id="L360"><span class="lineNum">     360</span>                 :             :       return mDeletable;</span>
<span id="L361"><span class="lineNum">     361</span>                 :             :     }</span>
<span id="L362"><span class="lineNum">     362</span>                 :             :     ;</span>
<span id="L363"><span class="lineNum">     363</span>                 :             :     /*!\brief Set attribute to enable/disable the runable object deletion by a management command.</span>
<span id="L364"><span class="lineNum">     364</span>                 :             :      *</span>
<span id="L365"><span class="lineNum">     365</span>                 :             :      */</span>
<span id="L366"><span class="lineNum">     366</span>                 :             :     void setDeletable(const bool &amp;paDelAble) {</span>
<span id="L367"><span class="lineNum">     367</span>                 :             :       mDeletable = paDelAble;</span>
<span id="L368"><span class="lineNum">     368</span>                 :             :     }</span>
<span id="L369"><span class="lineNum">     369</span>                 :             :     ;</span>
<span id="L370"><span class="lineNum">     370</span>                 :             :     /*!\brief Return if the runable object is allowed to be deleted now.</span>
<span id="L371"><span class="lineNum">     371</span>                 :             :      *</span>
<span id="L372"><span class="lineNum">     372</span>                 :             :      * This is more complex then the simple deleteable flag as the current state has to be incorporated.</span>
<span id="L373"><span class="lineNum">     373</span>                 :             :      * According to IEC 61499-1 Figure 24 an FB is deleteable if it is not in the Running state</span>
<span id="L374"><span class="lineNum">     374</span>                 :             :      * \return true if currently all conditions are met to be deleteable</span>
<span id="L375"><span class="lineNum">     375</span>                 :             :      */</span>
<span id="L376"><span class="lineNum">     376</span>                 :<span class="tlaGNC tlaBgGNC">           8 :     bool isCurrentlyDeleteable() const {</span></span>
<span id="L377"><span class="lineNum">     377</span>   [<span class="tlaGBC" title="Branch 0 was taken 8 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span><span class="tlaGBC" title="Branch 2 was taken 4 times"> + </span><span class="tlaGBC" title="Branch 3 was taken 4 times"> + </span>]:<span class="tlaGNC">           8 :       return ((mDeletable) &amp;&amp; (mFBState != E_FBStates::Running));</span></span>
<span id="L378"><span class="lineNum">     378</span>                 :             :     }</span>
<span id="L379"><span class="lineNum">     379</span>                 :             : </span>
<span id="L380"><span class="lineNum">     380</span>                 :             :     /*!\brief return the current execution state of the managed object</span>
<span id="L381"><span class="lineNum">     381</span>                 :             :      */</span>
<span id="L382"><span class="lineNum">     382</span>                 :<span class="tlaGNC">          30 :     E_FBStates getState() const {</span></span>
<span id="L383"><span class="lineNum">     383</span>                 :<span class="tlaGNC">          30 :       return mFBState;</span></span>
<span id="L384"><span class="lineNum">     384</span>                 :             :     }</span>
<span id="L385"><span class="lineNum">     385</span>                 :             : </span>
<span id="L386"><span class="lineNum">     386</span>                 :             :     /*! \brief Get the data input with given number</span>
<span id="L387"><span class="lineNum">     387</span>                 :             :      *</span>
<span id="L388"><span class="lineNum">     388</span>                 :             :      * Attention this function will not perform any range checks on the paDINum parameter!</span>
<span id="L389"><span class="lineNum">     389</span>                 :             :      * @param paDINum number of the data input starting with 0</span>
<span id="L390"><span class="lineNum">     390</span>                 :             :      * @return pointer to the data input</span>
<span id="L391"><span class="lineNum">     391</span>                 :             :      */</span>
<span id="L392"><span class="lineNum">     392</span>                 :<span class="tlaGNC">           8 :     virtual CIEC_ANY* getDI(TPortId paDINum) {</span></span>
<span id="L393"><span class="lineNum">     393</span>                 :<span class="tlaGNC">           8 :       return mDIs[paDINum];</span></span>
<span id="L394"><span class="lineNum">     394</span>                 :             :     }</span>
<span id="L395"><span class="lineNum">     395</span>                 :             : </span>
<span id="L396"><span class="lineNum">     396</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     const CIEC_ANY* getDI(TPortId paDINum) const {</span></span>
<span id="L397"><span class="lineNum">     397</span>                 :<span class="tlaUNC">           0 :       return const_cast&lt;CFunctionBlock*&gt;(this)-&gt;getDI(paDINum);</span></span>
<span id="L398"><span class="lineNum">     398</span>                 :             :     }</span>
<span id="L399"><span class="lineNum">     399</span>                 :             : </span>
<span id="L400"><span class="lineNum">     400</span>                 :             :     /*! \brief Get the data output with given number</span>
<span id="L401"><span class="lineNum">     401</span>                 :             :      *</span>
<span id="L402"><span class="lineNum">     402</span>                 :             :      * Attention this function will not perform any range checks on the paDONum parameter!</span>
<span id="L403"><span class="lineNum">     403</span>                 :             :      * @param paDONum number of the data output starting with 0</span>
<span id="L404"><span class="lineNum">     404</span>                 :             :      * @return pointer to the data output</span>
<span id="L405"><span class="lineNum">     405</span>                 :             :      */</span>
<span id="L406"><span class="lineNum">     406</span>                 :<span class="tlaUNC">           0 :     virtual CIEC_ANY* getDO(TPortId paDONum) {</span></span>
<span id="L407"><span class="lineNum">     407</span>                 :<span class="tlaUNC">           0 :       return mDOs[paDONum];</span></span>
<span id="L408"><span class="lineNum">     408</span>                 :             :     }</span>
<span id="L409"><span class="lineNum">     409</span>                 :             : </span>
<span id="L410"><span class="lineNum">     410</span>                 :<span class="tlaUNC">           0 :     const CIEC_ANY* getDO(TPortId paDONum) const {</span></span>
<span id="L411"><span class="lineNum">     411</span>                 :<span class="tlaUNC">           0 :       return const_cast&lt;CFunctionBlock *&gt;(this)-&gt;getDO(paDONum);</span></span>
<span id="L412"><span class="lineNum">     412</span>                 :             :     }</span>
<span id="L413"><span class="lineNum">     413</span>                 :             : </span>
<span id="L414"><span class="lineNum">     414</span>                 :             :     /*! \brief Get the data output with given number</span>
<span id="L415"><span class="lineNum">     415</span>                 :             :      *</span>
<span id="L416"><span class="lineNum">     416</span>                 :             :      * Attention this function will not perform any range checks on the paDONum parameter!</span>
<span id="L417"><span class="lineNum">     417</span>                 :             :      * @param paDONum number of the data output starting with 0</span>
<span id="L418"><span class="lineNum">     418</span>                 :             :      * @return pointer to the data output</span>
<span id="L419"><span class="lineNum">     419</span>                 :             :      */</span>
<span id="L420"><span class="lineNum">     420</span>                 :<span class="tlaUNC">           0 :     virtual CIEC_ANY* getDIO(TPortId paDIONum) {</span></span>
<span id="L421"><span class="lineNum">     421</span>                 :             :       (void)paDIONum; // indicate to the compiler that the param is unused</span>
<span id="L422"><span class="lineNum">     422</span>                 :<span class="tlaUNC">           0 :       return nullptr;</span></span>
<span id="L423"><span class="lineNum">     423</span>                 :             :     }</span>
<span id="L424"><span class="lineNum">     424</span>                 :             : </span>
<span id="L425"><span class="lineNum">     425</span>                 :<span class="tlaUNC">           0 :     const CIEC_ANY* getDIO(TPortId paDIONum) const {</span></span>
<span id="L426"><span class="lineNum">     426</span>                 :<span class="tlaUNC">           0 :       return const_cast&lt;CFunctionBlock *&gt;(this)-&gt;getDIO(paDIONum);</span></span>
<span id="L427"><span class="lineNum">     427</span>                 :             :     }</span>
<span id="L428"><span class="lineNum">     428</span>                 :             : </span>
<span id="L429"><span class="lineNum">     429</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L430"><span class="lineNum">     430</span>                 :             :     TForteUInt32 &amp;getEIMonitorData(TEventID paEIID);</span>
<span id="L431"><span class="lineNum">     431</span>                 :             : </span>
<span id="L432"><span class="lineNum">     432</span>                 :             :     TForteUInt32 &amp;getEOMonitorData(TEventID paEOID);</span>
<span id="L433"><span class="lineNum">     433</span>                 :             : </span>
<span id="L434"><span class="lineNum">     434</span>                 :             :     /*!\brief get any internal FB referenced by the iterator to the name list</span>
<span id="L435"><span class="lineNum">     435</span>                 :             :      *</span>
<span id="L436"><span class="lineNum">     436</span>                 :             :      * This allows that also adapters and the internals of a CFB can be monitored.</span>
<span id="L437"><span class="lineNum">     437</span>                 :             :      */</span>
<span id="L438"><span class="lineNum">     438</span>                 :             :     virtual CFunctionBlock *getFB(forte::core::TNameIdentifier::CIterator &amp;paNameListIt);</span>
<span id="L439"><span class="lineNum">     439</span>                 :             : </span>
<span id="L440"><span class="lineNum">     440</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L441"><span class="lineNum">     441</span>                 :             :     </span>
<span id="L442"><span class="lineNum">     442</span>                 :             :     virtual int toString(char* paValue, size_t paBufferSize) const;</span>
<span id="L443"><span class="lineNum">     443</span>                 :             : </span>
<span id="L444"><span class="lineNum">     444</span>                 :             :     virtual size_t getToStringBufferSize() const;</span>
<span id="L445"><span class="lineNum">     445</span>                 :             : </span>
<span id="L446"><span class="lineNum">     446</span>                 :             : #ifdef FORTE_TRACE_CTF</span>
<span id="L447"><span class="lineNum">     447</span>                 :             :     virtual void traceInstanceData() {}</span>
<span id="L448"><span class="lineNum">     448</span>                 :             : #endif //FORTE_TRACE_CTF</span>
<span id="L449"><span class="lineNum">     449</span>                 :             : </span>
<span id="L450"><span class="lineNum">     450</span>                 :             :   protected:</span>
<span id="L451"><span class="lineNum">     451</span>                 :             : </span>
<span id="L452"><span class="lineNum">     452</span>                 :             :     /*!\brief The main constructor for a function block.</span>
<span id="L453"><span class="lineNum">     453</span>                 :             :      *</span>
<span id="L454"><span class="lineNum">     454</span>                 :             :      * \param paContainer      FB container this function block is contained in (mainly necessary for management functions and service interfaces)</span>
<span id="L455"><span class="lineNum">     455</span>                 :             :      * \param paInterfaceSpec  const pointer to the interface spec</span>
<span id="L456"><span class="lineNum">     456</span>                 :             :      * \param paInstanceNameId string id</span>
<span id="L457"><span class="lineNum">     457</span>                 :             :      * \param paFBConnData     Byte-array for fb-specific connection data. It will need space for the event output connections,</span>
<span id="L458"><span class="lineNum">     458</span>                 :             :      *                             data input connections, and data output connections, in that order. The space requirements are:</span>
<span id="L459"><span class="lineNum">     459</span>                 :             :      *                               sizeof(TEventConnectionPtr) * Number of Event outputs +</span>
<span id="L460"><span class="lineNum">     460</span>                 :             :      *                               sizeof(TDataConnectionPtr)  * Number of Data inputs +</span>
<span id="L461"><span class="lineNum">     461</span>                 :             :      *                               sizeof(TDataConnectionPtr)  * Number of Data outputs</span>
<span id="L462"><span class="lineNum">     462</span>                 :             :      * \param paFBVarsData    Byte-array for fb-specific variable data. It will need space for the data inputs, data outputs, and adapters in that order.</span>
<span id="L463"><span class="lineNum">     463</span>                 :             :      *                             The space requirements are:</span>
<span id="L464"><span class="lineNum">     464</span>                 :             :      *                               sizeof(CIEC_ANY)) * Number of Data inputs +</span>
<span id="L465"><span class="lineNum">     465</span>                 :             :      *                               sizeof(CIEC_ANY)) * Number of Data outputs +</span>
<span id="L466"><span class="lineNum">     466</span>                 :             :      *                               sizeof(TAdapterPtr) * ta_nNumAdapters</span>
<span id="L467"><span class="lineNum">     467</span>                 :             :      */</span>
<span id="L468"><span class="lineNum">     468</span>                 :             :     CFunctionBlock(forte::core::CFBContainer &amp;paContainer, const SFBInterfaceSpec *paInterfaceSpec, CStringDictionary::TStringId paInstanceNameId);</span>
<span id="L469"><span class="lineNum">     469</span>                 :             : </span>
<span id="L470"><span class="lineNum">     470</span>                 :             :     static TPortId getPortId(CStringDictionary::TStringId paPortNameId, TPortId paMaxPortNames, const CStringDictionary::TStringId *paPortNames);</span>
<span id="L471"><span class="lineNum">     471</span>                 :             : </span>
<span id="L472"><span class="lineNum">     472</span>                 :             : </span>
<span id="L473"><span class="lineNum">     473</span>                 :             :     /*!\brief Function to send an output event of the FB.</span>
<span id="L474"><span class="lineNum">     474</span>                 :             :      *</span>
<span id="L475"><span class="lineNum">     475</span>                 :             :      * \param paECET the event chain execution thread to be used for sending output events</span>
<span id="L476"><span class="lineNum">     476</span>                 :             :      * \param paEO Event output ID where event should be fired.</span>
<span id="L477"><span class="lineNum">     477</span>                 :             :      * \param paExecEnv Event chain execution environment where the event will be sent to.</span>
<span id="L478"><span class="lineNum">     478</span>                 :             :      */</span>
<span id="L479"><span class="lineNum">     479</span>                 :<span class="tlaGNC tlaBgGNC">           2 :     void sendOutputEvent(TEventID paEO, CEventChainExecutionThread * const paECET){</span></span>
<span id="L480"><span class="lineNum">     480</span>                 :             :       FORTE_TRACE(&quot;OutputEvent: Function Block sending event: %d (maxid: %d)\n&quot;, paEO, mInterfaceSpec-&gt;mNumEOs - 1);</span>
<span id="L481"><span class="lineNum">     481</span>                 :             : </span>
<span id="L482"><span class="lineNum">     482</span>                 :             :       #ifdef FORTE_TRACE_CTF</span>
<span id="L483"><span class="lineNum">     483</span>                 :             :         traceOutputEvent(paEO);</span>
<span id="L484"><span class="lineNum">     484</span>                 :             :       #endif</span>
<span id="L485"><span class="lineNum">     485</span>                 :             : </span>
<span id="L486"><span class="lineNum">     486</span>         [<span class="tlaGBC" title="Branch 0 was taken 2 times"> + </span><span class="tlaUNC" title="Branch 1 was not taken"> - </span>]:<span class="tlaGNC">           2 :       if(paEO &lt; mInterfaceSpec-&gt;mNumEOs) {</span></span>
<span id="L487"><span class="lineNum">     487</span>                 :<span class="tlaGNC">           2 :         writeOutputData(paEO);</span></span>
<span id="L488"><span class="lineNum">     488</span>                 :<span class="tlaGNC">           2 :         getEOConUnchecked(static_cast&lt;TPortId&gt;(paEO))-&gt;triggerEvent(paECET);</span></span>
<span id="L489"><span class="lineNum">     489</span>                 :             : </span>
<span id="L490"><span class="lineNum">     490</span>                 :             :         #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L491"><span class="lineNum">     491</span>                 :             :             // Count Event for monitoring</span>
<span id="L492"><span class="lineNum">     492</span>                 :<span class="tlaGNC">           2 :             mEOMonitorCount[paEO]++;</span></span>
<span id="L493"><span class="lineNum">     493</span>                 :             :         #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L494"><span class="lineNum">     494</span>                 :             :       }</span>
<span id="L495"><span class="lineNum">     495</span>                 :<span class="tlaGNC">           2 :     }</span></span>
<span id="L496"><span class="lineNum">     496</span>                 :             : </span>
<span id="L497"><span class="lineNum">     497</span>                 :             :     /*!\brief Function to read data from an input connection into a variable of the FB.</span>
<span id="L498"><span class="lineNum">     498</span>                 :             :      *</span>
<span id="L499"><span class="lineNum">     499</span>                 :             :      * \param paValue Variable to read into.</span>
<span id="L500"><span class="lineNum">     500</span>                 :             :      * \param paConn Connection to read from.</span>
<span id="L501"><span class="lineNum">     501</span>                 :             :      */</span>
<span id="L502"><span class="lineNum">     502</span>                 :             : #ifdef FORTE_TRACE_CTF</span>
<span id="L503"><span class="lineNum">     503</span>                 :             :     void readData(size_t paDONum, CIEC_ANY &amp;paValue, const CDataConnection *const paConn);</span>
<span id="L504"><span class="lineNum">     504</span>                 :             : #else</span>
<span id="L505"><span class="lineNum">     505</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     void readData(size_t, CIEC_ANY &amp;paValue, const CDataConnection *const paConn) {</span></span>
<span id="L506"><span class="lineNum">     506</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :       if(!paConn) {</span></span>
<span id="L507"><span class="lineNum">     507</span>                 :<span class="tlaUNC">           0 :         return;</span></span>
<span id="L508"><span class="lineNum">     508</span>                 :             :       }</span>
<span id="L509"><span class="lineNum">     509</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L510"><span class="lineNum">     510</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :       if(!paValue.isForced()) {</span></span>
<span id="L511"><span class="lineNum">     511</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L512"><span class="lineNum">     512</span>                 :<span class="tlaUNC">           0 :         paConn-&gt;readData(paValue);</span></span>
<span id="L513"><span class="lineNum">     513</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L514"><span class="lineNum">     514</span>                 :             :       }</span>
<span id="L515"><span class="lineNum">     515</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L516"><span class="lineNum">     516</span>                 :             :     }</span>
<span id="L517"><span class="lineNum">     517</span>                 :             : #endif //FORTE_TRACE_CTF</span>
<span id="L518"><span class="lineNum">     518</span>                 :             : </span>
<span id="L519"><span class="lineNum">     519</span>                 :             :     /*!\brief Function to write data to an output connection from a variable of the FB.</span>
<span id="L520"><span class="lineNum">     520</span>                 :             :      *</span>
<span id="L521"><span class="lineNum">     521</span>                 :             :      * \param paValue Variable to write from.</span>
<span id="L522"><span class="lineNum">     522</span>                 :             :      * \param paConn Connection to write into.</span>
<span id="L523"><span class="lineNum">     523</span>                 :             :      */</span>
<span id="L524"><span class="lineNum">     524</span>                 :             : #ifdef FORTE_TRACE_CTF</span>
<span id="L525"><span class="lineNum">     525</span>                 :             :     void writeData(size_t paDONum, CIEC_ANY&amp; paValue, CDataConnection&amp; paConn);</span>
<span id="L526"><span class="lineNum">     526</span>                 :             : #else</span>
<span id="L527"><span class="lineNum">     527</span>                 :<span class="tlaUNC">           0 :     void writeData(size_t, CIEC_ANY&amp; paValue, CDataConnection&amp; paConn) {</span></span>
<span id="L528"><span class="lineNum">     528</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :       if(paConn.isConnected()) {</span></span>
<span id="L529"><span class="lineNum">     529</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L530"><span class="lineNum">     530</span>         [<span class="tlaUNC" title="Branch 0 was not executed"> # </span><span class="tlaUNC" title="Branch 1 was not executed"> # </span>]:<span class="tlaUNC">           0 :         if(!paValue.isForced()) {</span></span>
<span id="L531"><span class="lineNum">     531</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L532"><span class="lineNum">     532</span>                 :<span class="tlaUNC">           0 :           paConn.writeData(paValue);</span></span>
<span id="L533"><span class="lineNum">     533</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L534"><span class="lineNum">     534</span>                 :             :         } else {</span>
<span id="L535"><span class="lineNum">     535</span>                 :             :           //when forcing we write back the value from the connection to keep the forced value on the output</span>
<span id="L536"><span class="lineNum">     536</span>                 :<span class="tlaUNC">           0 :           paConn.readData(paValue);</span></span>
<span id="L537"><span class="lineNum">     537</span>                 :             :         }</span>
<span id="L538"><span class="lineNum">     538</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L539"><span class="lineNum">     539</span>                 :             :                         }</span>
<span id="L540"><span class="lineNum">     540</span>                 :<span class="tlaUNC">           0 :     }</span></span>
<span id="L541"><span class="lineNum">     541</span>                 :             : #endif //FORTE_TRACE_CTF</span>
<span id="L542"><span class="lineNum">     542</span>                 :             : </span>
<span id="L543"><span class="lineNum">     543</span>                 :             :     /*!\brief Set the initial values of data inputs, outputs, and internal vars.</span>
<span id="L544"><span class="lineNum">     544</span>                 :             :      *</span>
<span id="L545"><span class="lineNum">     545</span>                 :             :      * The default implementation initializes all input, output, and internal variables</span>
<span id="L546"><span class="lineNum">     546</span>                 :             :      * to the implicit default value corresponding to the type of the variable.</span>
<span id="L547"><span class="lineNum">     547</span>                 :             :      *</span>
<span id="L548"><span class="lineNum">     548</span>                 :             :      * Any FB with explicit default values still has to override setInitialValues for proper Reset behavior,</span>
<span id="L549"><span class="lineNum">     549</span>                 :             :      * other FBs may choose to override for improved performance.</span>
<span id="L550"><span class="lineNum">     550</span>                 :             :      */</span>
<span id="L551"><span class="lineNum">     551</span>                 :             :     virtual void setInitialValues();</span>
<span id="L552"><span class="lineNum">     552</span>                 :             : </span>
<span id="L553"><span class="lineNum">     553</span>                 :             :     /*!\brief Function to send an output event via the adapter.</span>
<span id="L554"><span class="lineNum">     554</span>                 :             :      *</span>
<span id="L555"><span class="lineNum">     555</span>                 :             :      * \param paAdapterID ID of Adapter in current FBs adapter list.</span>
<span id="L556"><span class="lineNum">     556</span>                 :             :      * \param paEID Event ID where event should be fired.</span>
<span id="L557"><span class="lineNum">     557</span>                 :             :      * \param paExecEnv Event chain execution environment where the event will be sent to.</span>
<span id="L558"><span class="lineNum">     558</span>                 :             :      */</span>
<span id="L559"><span class="lineNum">     559</span>                 :             :     void sendAdapterEvent(TPortId paAdapterID, TEventID paEID, CEventChainExecutionThread * const paECET) const;</span>
<span id="L560"><span class="lineNum">     560</span>                 :             : </span>
<span id="L561"><span class="lineNum">     561</span>                 :             :     void setupAdapters(const SFBInterfaceSpec *paInterfaceSpec, TForteByte *paFBData);</span>
<span id="L562"><span class="lineNum">     562</span>                 :             : </span>
<span id="L563"><span class="lineNum">     563</span>                 :<span class="tlaGNC tlaBgGNC">           2 :     virtual CEventConnection *getEOConUnchecked(TPortId paEONum) {</span></span>
<span id="L564"><span class="lineNum">     564</span>                 :<span class="tlaGNC">           2 :       return (mEOConns + paEONum);</span></span>
<span id="L565"><span class="lineNum">     565</span>                 :             :     }</span>
<span id="L566"><span class="lineNum">     566</span>                 :             : </span>
<span id="L567"><span class="lineNum">     567</span>                 :             :     /*! \brief Get the data output connection with given number</span>
<span id="L568"><span class="lineNum">     568</span>                 :             :      *</span>
<span id="L569"><span class="lineNum">     569</span>                 :             :      * Attention this function will not perform any range checks on the paDONum parameter!</span>
<span id="L570"><span class="lineNum">     570</span>                 :             :      * @param paDONum number of the data output starting with 0</span>
<span id="L571"><span class="lineNum">     571</span>                 :             :      * @return pointer to the data output connection</span>
<span id="L572"><span class="lineNum">     572</span>                 :             :      */</span>
<span id="L573"><span class="lineNum">     573</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     virtual CDataConnection *getDOConUnchecked(TPortId paDONum) {</span></span>
<span id="L574"><span class="lineNum">     574</span>                 :<span class="tlaUNC">           0 :       return mDOConns + paDONum;</span></span>
<span id="L575"><span class="lineNum">     575</span>                 :             :     }</span>
<span id="L576"><span class="lineNum">     576</span>                 :             : </span>
<span id="L577"><span class="lineNum">     577</span>                 :             :     /*! \brief Get the data input connection with given number</span>
<span id="L578"><span class="lineNum">     578</span>                 :             :      *</span>
<span id="L579"><span class="lineNum">     579</span>                 :             :      * Attention this function will not perform any range checks on the paDINum parameter!</span>
<span id="L580"><span class="lineNum">     580</span>                 :             :      * @param paDINum number of the data input starting with 0</span>
<span id="L581"><span class="lineNum">     581</span>                 :             :      * @return pointer to the data input connection</span>
<span id="L582"><span class="lineNum">     582</span>                 :             :      */</span>
<span id="L583"><span class="lineNum">     583</span>                 :<span class="tlaGNC tlaBgGNC">          12 :     virtual CDataConnection **getDIConUnchecked(TPortId paDINum) {</span></span>
<span id="L584"><span class="lineNum">     584</span>                 :<span class="tlaGNC">          12 :       return mDIConns + paDINum;</span></span>
<span id="L585"><span class="lineNum">     585</span>                 :             :     }</span>
<span id="L586"><span class="lineNum">     586</span>                 :             : </span>
<span id="L587"><span class="lineNum">     587</span>                 :             :     /*! \brief Get the data inout connection with given number</span>
<span id="L588"><span class="lineNum">     588</span>                 :             :      *</span>
<span id="L589"><span class="lineNum">     589</span>                 :             :      * Attention this function will not perform any range checks on the paDIONum parameter!</span>
<span id="L590"><span class="lineNum">     590</span>                 :             :      * @param paDIONum number of the data inout starting with 0</span>
<span id="L591"><span class="lineNum">     591</span>                 :             :      * @return pointer to the data inout connection</span>
<span id="L592"><span class="lineNum">     592</span>                 :             :      */</span>
<span id="L593"><span class="lineNum">     593</span>                 :<span class="tlaUNC tlaBgUNC">           0 :     virtual CInOutDataConnection **getDIOInConUnchecked(TPortId paDIONum) {</span></span>
<span id="L594"><span class="lineNum">     594</span>                 :             :       (void)paDIONum; // indicate to the compiler that the param is unused</span>
<span id="L595"><span class="lineNum">     595</span>                 :<span class="tlaUNC">           0 :       return nullptr;</span></span>
<span id="L596"><span class="lineNum">     596</span>                 :             :     }</span>
<span id="L597"><span class="lineNum">     597</span>                 :             : </span>
<span id="L598"><span class="lineNum">     598</span>                 :<span class="tlaUNC">           0 :     virtual CInOutDataConnection *getDIOOutConUnchecked(TPortId) {</span></span>
<span id="L599"><span class="lineNum">     599</span>                 :<span class="tlaUNC">           0 :       return nullptr;</span></span>
<span id="L600"><span class="lineNum">     600</span>                 :             :     }</span>
<span id="L601"><span class="lineNum">     601</span>                 :             : </span>
<span id="L602"><span class="lineNum">     602</span>                 :             :     /*!\brief helper function for changeing the FB execution state for FBs with internal FBs</span>
<span id="L603"><span class="lineNum">     603</span>                 :             :      *</span>
<span id="L604"><span class="lineNum">     604</span>                 :             :      * @param paCommand the reqeusted state change (i.e., start, stop, kill, reset)</span>
<span id="L605"><span class="lineNum">     605</span>                 :             :      * @param paAmountOfInternalFBs number of internal FBs contained in this FB</span>
<span id="L606"><span class="lineNum">     606</span>                 :             :      * @param paInternalFBs  array with the internal FBs of this FB</span>
<span id="L607"><span class="lineNum">     607</span>                 :             :      * @return success status of the requested state change</span>
<span id="L608"><span class="lineNum">     608</span>                 :             :      */</span>
<span id="L609"><span class="lineNum">     609</span>                 :             :     EMGMResponse changeFBExecutionStateHelper(const EMGMCommandType paCommand, const size_t paAmountOfInternalFBs, TFunctionBlockPtr *const paInternalFBs);</span>
<span id="L610"><span class="lineNum">     610</span>                 :             : </span>
<span id="L611"><span class="lineNum">     611</span>                 :             :     /*!\brief Get the size of a data point</span>
<span id="L612"><span class="lineNum">     612</span>                 :             :      *</span>
<span id="L613"><span class="lineNum">     613</span>                 :             :      * @param paDataTypeIds pointer to the data type ids. If the datatype</span>
<span id="L614"><span class="lineNum">     614</span>                 :             :      *        is an Array to more values are taken from the array. If the given</span>
<span id="L615"><span class="lineNum">     615</span>                 :             :      *        type is Any 0 is returned as necessary for maintaining the FB's interface.</span>
<span id="L616"><span class="lineNum">     616</span>                 :             :      *        The functions puts the pointer in the datatype array to the next data point's id.</span>
<span id="L617"><span class="lineNum">     617</span>                 :             :      * @return The size of the data point</span>
<span id="L618"><span class="lineNum">     618</span>                 :             :      */</span>
<span id="L619"><span class="lineNum">     619</span>                 :             :     static size_t getDataPointSize(const CStringDictionary::TStringId *&amp;paDataTypeIds);</span>
<span id="L620"><span class="lineNum">     620</span>                 :             : </span>
<span id="L621"><span class="lineNum">     621</span>                 :             :     /*!\brief Function to create an data type instance of given type</span>
<span id="L622"><span class="lineNum">     622</span>                 :             :      *</span>
<span id="L623"><span class="lineNum">     623</span>                 :             :      * @param paDataTypeIds pointer to the data type ids. If the datatype</span>
<span id="L624"><span class="lineNum">     624</span>                 :             :      *        is an Array to more values are taken from the array. If the given</span>
<span id="L625"><span class="lineNum">     625</span>                 :             :      *        type is Any 0 is returned as necessary for maintaining the FB's interface.</span>
<span id="L626"><span class="lineNum">     626</span>                 :             :      *        The functions puts the pointer in the datatype array to the next data point's id.</span>
<span id="L627"><span class="lineNum">     627</span>                 :             :      * @param paDataBuf pointer to the data buffer which should be used by the data type to create</span>
<span id="L628"><span class="lineNum">     628</span>                 :             :      * @return on success... pointer to the datatype instance</span>
<span id="L629"><span class="lineNum">     629</span>                 :             :      *         on error... 0</span>
<span id="L630"><span class="lineNum">     630</span>                 :             :      */</span>
<span id="L631"><span class="lineNum">     631</span>                 :             :     static CIEC_ANY* createDataPoint(const CStringDictionary::TStringId *&amp;paDataTypeIds, TForteByte *&amp;paDataBuf);</span>
<span id="L632"><span class="lineNum">     632</span>                 :             : </span>
<span id="L633"><span class="lineNum">     633</span>                 :             :     /*!\brief Function to skip to the next data point</span>
<span id="L634"><span class="lineNum">     634</span>                 :             :      *</span>
<span id="L635"><span class="lineNum">     635</span>                 :             :      * @param paDataTypeIds pointer to the data type ids. If the datatype</span>
<span id="L636"><span class="lineNum">     636</span>                 :             :      *        is an Array to more values are taken from the array.</span>
<span id="L637"><span class="lineNum">     637</span>                 :             :      */</span>
<span id="L638"><span class="lineNum">     638</span>                 :             :     static void nextDataPoint(const CStringDictionary::TStringId *&amp;paDataTypeIds);</span>
<span id="L639"><span class="lineNum">     639</span>                 :             : </span>
<span id="L640"><span class="lineNum">     640</span>                 :             :     static EMGMResponse changeInternalFBExecutionState(const EMGMCommandType paCommand, const size_t paAmountOfInternalFBs, TFunctionBlockPtr *const paInternalFBs);</span>
<span id="L641"><span class="lineNum">     641</span>                 :             : </span>
<span id="L642"><span class="lineNum">     642</span>                 :             :     void freeAllData();</span>
<span id="L643"><span class="lineNum">     643</span>                 :             : </span>
<span id="L644"><span class="lineNum">     644</span>                 :             :     const SFBInterfaceSpec *mInterfaceSpec; //!&lt; Pointer to the interface specification</span>
<span id="L645"><span class="lineNum">     645</span>                 :             :     CEventConnection *mEOConns; //!&lt; A list of event connections pointers storing for each event output the event connection. If the output event is not connected the pointer is nullptr.</span>
<span id="L646"><span class="lineNum">     646</span>                 :             :     CDataConnection **mDIConns; //!&lt; A list of data connections pointers storing for each data input the data connection. If the data input is not connected the pointer is nullptr.</span>
<span id="L647"><span class="lineNum">     647</span>                 :             :     CDataConnection *mDOConns; //!&lt; A list of data connections pointers storing for each data output the data connection. If the data output is not connected the pointer is nullptr.</span>
<span id="L648"><span class="lineNum">     648</span>                 :             :     CIEC_ANY **mDIs; //!&lt; A list of pointers to the data inputs. This allows to implement a general getDataInput()</span>
<span id="L649"><span class="lineNum">     649</span>                 :             :     CIEC_ANY **mDOs; //!&lt; A list of pointers to the data outputs. This allows to implement a general getDataOutput()</span>
<span id="L650"><span class="lineNum">     650</span>                 :             :     CAdapter **mAdapters; //!&lt; A list of pointers to the adapters. This allows to implement a general getAdapter().</span>
<span id="L651"><span class="lineNum">     651</span>                 :             :     void *mFBConnData; //!&lt; Connection data buffer</span>
<span id="L652"><span class="lineNum">     652</span>                 :             :     void *mFBVarsData; //!&lt; Variable data buffer</span>
<span id="L653"><span class="lineNum">     653</span>                 :             :   private:</span>
<span id="L654"><span class="lineNum">     654</span>                 :             : </span>
<span id="L655"><span class="lineNum">     655</span>                 :             :     /*!\brief Function providing the functionality of the FB (e.g. execute ECC for basic FBs).</span>
<span id="L656"><span class="lineNum">     656</span>                 :             :      *</span>
<span id="L657"><span class="lineNum">     657</span>                 :             :      * \param paECET the event chain execution thread this FB was invoked from</span>
<span id="L658"><span class="lineNum">     658</span>                 :             :      * \param paEIID Event input ID where event occurred.</span>
<span id="L659"><span class="lineNum">     659</span>                 :             :      * \param paExecEnv Event chain execution environment the FB will be executed in (used for adding output events).</span>
<span id="L660"><span class="lineNum">     660</span>                 :             :      *</span>
<span id="L661"><span class="lineNum">     661</span>                 :             :      *</span>
<span id="L662"><span class="lineNum">     662</span>                 :             :      */</span>
<span id="L663"><span class="lineNum">     663</span>                 :             :     virtual void executeEvent(TEventID paEIID, CEventChainExecutionThread * const paECET) = 0;</span>
<span id="L664"><span class="lineNum">     664</span>                 :             : </span>
<span id="L665"><span class="lineNum">     665</span>                 :             :     /*!\brief Function reading the values from input connections of the FB.</span>
<span id="L666"><span class="lineNum">     666</span>                 :             :      *</span>
<span id="L667"><span class="lineNum">     667</span>                 :             :      * \param paEIID Event input ID where event occurred.</span>
<span id="L668"><span class="lineNum">     668</span>                 :             :      */</span>
<span id="L669"><span class="lineNum">     669</span>                 :             :     virtual void readInputData(TEventID paEIID) = 0;</span>
<span id="L670"><span class="lineNum">     670</span>                 :             : </span>
<span id="L671"><span class="lineNum">     671</span>                 :             :     /*!\brief Function writing the values to output connections of the FB.</span>
<span id="L672"><span class="lineNum">     672</span>                 :             :      *</span>
<span id="L673"><span class="lineNum">     673</span>                 :             :      * \param paEIID Event output ID where event occurred.</span>
<span id="L674"><span class="lineNum">     674</span>                 :             :      */</span>
<span id="L675"><span class="lineNum">     675</span>                 :             :     virtual void writeOutputData(TEventID paEO) = 0;</span>
<span id="L676"><span class="lineNum">     676</span>                 :             : </span>
<span id="L677"><span class="lineNum">     677</span>                 :             :   public:</span>
<span id="L678"><span class="lineNum">     678</span>                 :             :     CFunctionBlock(const CFunctionBlock&amp;) = delete;</span>
<span id="L679"><span class="lineNum">     679</span>                 :             : </span>
<span id="L680"><span class="lineNum">     680</span>                 :             :   protected:</span>
<span id="L681"><span class="lineNum">     681</span>                 :             :     int writeToStringNameValuePair(char *paValue, size_t paBufferSize, const CStringDictionary::TStringId variableNameId, const CIEC_ANY *const variable) const;</span>
<span id="L682"><span class="lineNum">     682</span>                 :             :     constexpr static char csmToStringSeparator[] = &quot;, &quot;;</span>
<span id="L683"><span class="lineNum">     683</span>                 :             : </span>
<span id="L684"><span class="lineNum">     684</span>                 :             :   private:</span>
<span id="L685"><span class="lineNum">     685</span>                 :             :     void configureGenericDI(TPortId paDIPortId, const CIEC_ANY *paRefValue);</span>
<span id="L686"><span class="lineNum">     686</span>                 :             :     void configureGenericDIO(TPortId paDIOPortId, const CIEC_ANY *paRefValue);</span>
<span id="L687"><span class="lineNum">     687</span>                 :             : </span>
<span id="L688"><span class="lineNum">     688</span>                 :             :     forte::core::CFBContainer &amp;mContainer; //!&lt; The container of this function block.</span>
<span id="L689"><span class="lineNum">     689</span>                 :             : </span>
<span id="L690"><span class="lineNum">     690</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L691"><span class="lineNum">     691</span>                 :             :     void setupEventMonitoringData();</span>
<span id="L692"><span class="lineNum">     692</span>                 :             : </span>
<span id="L693"><span class="lineNum">     693</span>                 :             :     // monitoring stuff</span>
<span id="L694"><span class="lineNum">     694</span>                 :             :     TForteUInt32 *mEOMonitorCount;</span>
<span id="L695"><span class="lineNum">     695</span>                 :             :     TForteUInt32 *mEIMonitorCount;</span>
<span id="L696"><span class="lineNum">     696</span>                 :             : #endif</span>
<span id="L697"><span class="lineNum">     697</span>                 :             : </span>
<span id="L698"><span class="lineNum">     698</span>                 :             : #ifdef FORTE_TRACE_CTF</span>
<span id="L699"><span class="lineNum">     699</span>                 :             :     void traceInputEvent(TEventID paEIID);</span>
<span id="L700"><span class="lineNum">     700</span>                 :             :     void traceOutputEvent(TEventID paEOID);</span>
<span id="L701"><span class="lineNum">     701</span>                 :             : #endif</span>
<span id="L702"><span class="lineNum">     702</span>                 :             :     //! the instance name of the object</span>
<span id="L703"><span class="lineNum">     703</span>                 :             :     CStringDictionary::TStringId mFBInstanceName;</span>
<span id="L704"><span class="lineNum">     704</span>                 :             : </span>
<span id="L705"><span class="lineNum">     705</span>                 :             :     /*!\brief Current state of the runnable object.</span>
<span id="L706"><span class="lineNum">     706</span>                 :             :      *</span>
<span id="L707"><span class="lineNum">     707</span>                 :             :      */</span>
<span id="L708"><span class="lineNum">     708</span>                 :             :     E_FBStates mFBState;</span>
<span id="L709"><span class="lineNum">     709</span>                 :             : </span>
<span id="L710"><span class="lineNum">     710</span>                 :             :     /*!\brief Attribute defines if runnable object can be deleted by a management command.</span>
<span id="L711"><span class="lineNum">     711</span>                 :             :      *</span>
<span id="L712"><span class="lineNum">     712</span>                 :             :      * Default value is set to true.</span>
<span id="L713"><span class="lineNum">     713</span>                 :             :      * If the runnable object is declared in a device or resource specification it must be set to false.</span>
<span id="L714"><span class="lineNum">     714</span>                 :             :      */</span>
<span id="L715"><span class="lineNum">     715</span>                 :             :     bool mDeletable;</span>
<span id="L716"><span class="lineNum">     716</span>                 :             : </span>
<span id="L717"><span class="lineNum">     717</span>                 :             : #ifdef FORTE_SUPPORT_MONITORING</span>
<span id="L718"><span class="lineNum">     718</span>                 :             :     friend class forte::core::CMonitoringHandler;</span>
<span id="L719"><span class="lineNum">     719</span>                 :             : #endif //FORTE_SUPPORT_MONITORING</span>
<span id="L720"><span class="lineNum">     720</span>                 :             : </span>
<span id="L721"><span class="lineNum">     721</span>                 :             : #ifdef FORTE_FMU</span>
<span id="L722"><span class="lineNum">     722</span>                 :             :     friend class fmuInstance;</span>
<span id="L723"><span class="lineNum">     723</span>                 :             : #endif //FORTE_FMU</span>
<span id="L724"><span class="lineNum">     724</span>                 :             : };</span>
<span id="L725"><span class="lineNum">     725</span>                 :             : </span>
<span id="L726"><span class="lineNum">     726</span>                 :             : #define FUNCTION_BLOCK_CTOR(fbclass) \</span>
<span id="L727"><span class="lineNum">     727</span>                 :             :  fbclass(const CStringDictionary::TStringId paInstanceNameId, forte::core::CFBContainer &amp;paContainer) : \</span>
<span id="L728"><span class="lineNum">     728</span>                 :             :  CFunctionBlock(paContainer, &amp;scmFBInterfaceSpec, paInstanceNameId)</span>
<span id="L729"><span class="lineNum">     729</span>                 :             : </span>
<span id="L730"><span class="lineNum">     730</span>                 :             : #define FUNCTION_BLOCK_CTOR_WITH_BASE_CLASS(fbclass, fbBaseClass) \</span>
<span id="L731"><span class="lineNum">     731</span>                 :             :  fbclass(const CStringDictionary::TStringId paInstanceNameId, forte::core::CFBContainer &amp;paContainer) : \</span>
<span id="L732"><span class="lineNum">     732</span>                 :             :  fbBaseClass(paContainer, &amp;scmFBInterfaceSpec, paInstanceNameId)</span>
<span id="L733"><span class="lineNum">     733</span>                 :             : </span>
<span id="L734"><span class="lineNum">     734</span>                 :             : </span>
<span id="L735"><span class="lineNum">     735</span>                 :             : #ifdef OPTIONAL</span>
<span id="L736"><span class="lineNum">     736</span>                 :             : #undef OPTIONAL</span>
<span id="L737"><span class="lineNum">     737</span>                 :             : #endif</span>
<span id="L738"><span class="lineNum">     738</span>                 :             : </span>
<span id="L739"><span class="lineNum">     739</span>                 :             : #endif /*_FUNCBLOC_H_*/</span>
        </pre>
              </td>
            </tr>
          </table>
          <br>

          <table width="100%" border=0 cellspacing=0 cellpadding=0>
            <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
            <tr><td class="versionInfo">Generated by: <a href="https://github.com//linux-test-project/lcov" target="_parent">LCOV version 2.0-1</a></td></tr>
          </table>
          <br>

</body>
</html>
